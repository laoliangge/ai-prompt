<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‘å¸ƒå·¥å…· - AI PROMPT</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* --- é¡µé¢æ•´ä½“å¸ƒå±€ --- */
        body {
            padding-top: 80px;
            background-color: #0f0f11;
            /* åŠ ä¸€ç‚¹èƒŒæ™¯å…‰æ™•ï¼Œæ›´æœ‰æ°›å›´æ„Ÿ */
            background-image: radial-gradient(circle at 50% 0%, #1e1e24 0%, #0f0f11 60%);
            min-height: 100vh;
        }

        .admin-container {
            max-width: 600px;
            margin: 0 auto 60px;
            padding: 20px;
            animation: fadeIn 0.5s ease-out;
        }

        /* --- å¡ç‰‡å®¹å™¨ï¼šç£¨ç ‚ç»ç’ƒè´¨æ„Ÿ --- */
        .form-card {
            background: rgba(26, 26, 28, 0.6);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 20px 40px -10px rgba(0,0,0,0.5);
        }

        h2 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.5rem;
            background: linear-gradient(to right, #fff, #a0a0a0);
            -webkit-background-clip: text;
            color: transparent;
            letter-spacing: 1px;
        }

        .form-group { margin-bottom: 24px; }

        label {
            display: block;
            margin-bottom: 10px;
            color: #d1d5db;
            font-size: 0.9rem;
            font-weight: 500;
            display: flex;
            justify-content: space-between;
        }

        /* --- è¾“å…¥æ¡†ï¼šæ›´é«˜çº§çš„æ·±è‰² --- */
        input, textarea {
            width: 100%;
            padding: 14px 16px;
            background: #141416;
            border: 1px solid #333;
            border-radius: 10px;
            color: #fff;
            font-size: 15px;
            transition: all 0.3s ease;
            outline: none;
            box-sizing: border-box;
        }

        /* é€‰ä¸­æ—¶å…‰æ™•æ•ˆæœ */
        input:focus, textarea:focus {
            border-color: #6366f1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
            background: #1a1a1c;
        }

        textarea { height: 140px; line-height: 1.6; resize: vertical; }

        /* --- å›¾ç‰‡é€‰æ‹©å™¨ï¼šå»åœŸå‘³ï¼Œæ¢å›¾æ ‡ --- */
        .file-select-box {
            position: relative;
            background: #141416;
            border: 2px dashed #444;
            border-radius: 10px;
            padding: 30px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            overflow: hidden;
        }

        .file-select-box:hover {
            border-color: #6366f1;
            background: rgba(99, 102, 241, 0.05);
        }

        /* çº¯ CSS ç”»ä¸€ä¸ªé«˜çº§çš„ä¸Šä¼ å›¾æ ‡ */
        .upload-icon {
            width: 40px;
            height: 40px;
            margin: 0 auto 12px;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236366f1'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12'/%3E%3C/svg%3E") no-repeat center/contain;
            opacity: 0.8;
        }

        .upload-text { color: #888; font-size: 0.9rem; }
        .upload-hint { color: #555; font-size: 0.75rem; margin-top: 6px; }

        /* é€‰å¥½å›¾åçš„çŠ¶æ€ */
        .file-select-box.has-file {
            border-style: solid;
            border-color: #10b981; /* ç»¿è‰² */
            background: rgba(16, 185, 129, 0.05);
        }
        .file-select-box.has-file .upload-icon {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2310b981'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M5 13l4 4L19 7'/%3E%3C/svg%3E");
        }

        /* --- ç”ŸæˆæŒ‰é’®ï¼šæµå…‰æ¸å˜ --- */
        .btn-submit {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #4E75F6 0%, #E94868 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 15px rgba(233, 72, 104, 0.3);
        }

        .btn-submit:active { transform: scale(0.98); }

        /* --- ç»“æœæ˜¾ç¤ºåŒºï¼šä»£ç ç¼–è¾‘å™¨é£æ ¼ --- */
        .result-container {
            margin-top: 30px;
            display: none; /* é»˜è®¤éšè— */
            animation: slideUp 0.3s ease-out;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-size: 0.85rem;
            color: #888;
        }

        .code-box-wrapper {
            position: relative; /* å…³é”®ï¼šç»™å¤åˆ¶æŒ‰é’®å®šä½ */
            background: #0d0d0d;
            border: 1px solid #333;
            border-radius: 10px;
            overflow: hidden;
        }

        /* é‚£ä¸ªâ€œå¤åˆ¶â€æŒ‰é’® */
        .copy-btn-floating {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255,255,255,0.1);
            color: #fff;
            border: 1px solid rgba(255,255,255,0.2);
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            z-index: 10;
            transition: all 0.2s;
        }
        
        .copy-btn-floating:hover { background: rgba(255,255,255,0.2); }
        
        /* å¤åˆ¶æˆåŠŸçš„çŠ¶æ€ */
        .copy-btn-floating.success {
            background: rgba(16, 185, 129, 0.2);
            color: #34d399;
            border-color: #34d399;
        }

        .code-content {
            padding: 20px;
            margin: 0;
            font-family: 'Consolas', 'Monaco', monospace;
            color: #a5f3fc; /* è§å…‰è“ */
            font-size: 13px;
            white-space: pre-wrap;
            word-break: break-all;
            max-height: 400px;
            overflow-y: auto;
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="logo">
                <svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 4C14 9 15 10 20 12C15 14 14 15 12 20C10 15 9 14 4 12C9 10 10 9 12 4Z" fill="url(#gemini-gradient)"/>
                    <defs>
                        <linearGradient id="gemini-gradient" x1="0" y1="0" x2="24" y2="24" gradientUnits="userSpaceOnUse">
                            <stop offset="0%" stop-color="#4E75F6"/>
                            <stop offset="100%" stop-color="#E94868"/>
                        </linearGradient>
                    </defs>
                </svg>
                <span class="logo-text">AI PROMPT</span>
            </div>
            <div class="nav-links">
                <a href="index.html">äº§å“</a>
                <a href="admin.html" class="active" style="color:#fff;">å‘å¸ƒå·¥å…·</a>
            </div>
        </div>
    </nav>

    <div class="admin-container">
        <div class="form-card">
            <h2>å†…å®¹ç”Ÿæˆå™¨</h2>

            <div class="form-group">
                <label>1. æ ‡é¢˜ / Title</label>
                <input type="text" id="title" placeholder="ç»™ä½ çš„ä½œå“èµ·ä¸ªå¥½å¬çš„åå­—">
            </div>

            <div class="form-group">
                <label>2. åˆ†ç±» / Category</label>
                <input type="text" id="category" placeholder="ä¾‹å¦‚ï¼šç¾é£Ÿ / åˆ›æ„">
            </div>

            <div class="form-group">
                <label>3. å›¾ç‰‡ / Image</label>
                <input type="file" id="realFileInput" accept="image/*" style="display:none">
                
                <div class="file-select-box" id="dropZone" onclick="document.getElementById('realFileInput').click()">
                    <div class="upload-icon"></div>
                    <div class="upload-text" id="uploadText">ç‚¹å‡»é€‰æ‹©å›¾ç‰‡</div>
                    <div class="upload-hint">è‡ªåŠ¨ç”Ÿæˆ images/ è·¯å¾„</div>
                </div>
                
                <input type="hidden" id="imageUrl">
            </div>

            <div class="form-group">
                <label>4. æç¤ºè¯ / Prompt</label>
                <textarea id="prompt" placeholder="åœ¨æ­¤ç²˜è´´ä½ çš„å’’è¯­..."></textarea>
            </div>

            <button class="btn-submit" onclick="generateCode()">âœ¨ ç”Ÿæˆ JSON ä»£ç </button>

            <div class="result-container" id="resultArea">
                <div class="code-header">
                    <span>ç”ŸæˆæˆåŠŸï¼è¯·å¤åˆ¶ä¸‹æ–¹ä»£ç ï¼š</span>
                </div>
                
                <div class="code-box-wrapper">
                    <button class="copy-btn-floating" id="copyBtn" onclick="copyToClipboard()">
                        ğŸ“‹ å¤åˆ¶
                    </button>
                    
                    <pre class="code-content" id="jsonResult"></pre>
                </div>
                
                <p style="text-align: center; font-size: 12px; color: #666; margin-top: 15px;">
                    å°†å¤åˆ¶çš„ä»£ç ç²˜è´´åˆ° data.json æ–‡ä»¶çš„æœ€ä¸Šæ–¹
                </p>
            </div>
        </div>
    </div>

    <script>
        // 1. ç›‘å¬æ–‡ä»¶é€‰æ‹©
        document.getElementById('realFileInput').addEventListener('change', function(e) {
            if (e.target.files && e.target.files[0]) {
                let file = e.target.files[0];
                let box = document.getElementById('dropZone');
                let text = document.getElementById('uploadText');
                
                // æ”¹å˜æ ·å¼è¡¨ç¤ºå·²é€‰ä¸­
                box.classList.add('has-file');
                text.innerText = "å·²é€‰ä¸­: " + file.name;
                text.style.color = "#10b981";
                
                // å¡«å…¥å€¼
                document.getElementById('imageUrl').value = "images/" + file.name;
            }
        });

        // 2. ç”Ÿæˆ JSON
        function generateCode() {
            let title = document.getElementById('title').value || "æœªå‘½å";
            let category = document.getElementById('category').value || "æœªåˆ†ç±»";
            let imageUrl = document.getElementById('imageUrl').value;
            let prompt = document.getElementById('prompt').value || "æš‚æ— æç¤ºè¯";

            if (!imageUrl) {
                alert("è€æ¢ï¼Œå›¾è¿˜æ²¡é€‰å‘¢ï¼");
                imageUrl = ""; 
            }

            let newItem = {
                id: Date.now(),
                title: title,
                category: category,
                imageUrl: imageUrl,
                prompt: prompt
            };

            // æ ¼å¼åŒ–ä»£ç 
            let jsonString = JSON.stringify(newItem, null, 4);
            // è¡¥ä¸ªé€—å·
            jsonString = "    " + jsonString + ","; 

            document.getElementById('resultArea').style.display = 'block';
            document.getElementById('jsonResult').innerText = jsonString;
            
            // è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
            document.getElementById('resultArea').scrollIntoView({behavior: "smooth"});
        }

        // 3. ä¸€é”®å¤åˆ¶åŠŸèƒ½
        function copyToClipboard() {
            const codeText = document.getElementById('jsonResult').innerText;
            navigator.clipboard.writeText(codeText).then(() => {
                // å¤åˆ¶æˆåŠŸåçš„åé¦ˆ
                const btn = document.getElementById('copyBtn');
                btn.innerText = "âœ… å·²å¤åˆ¶";
                btn.classList.add('success');
                
                // 2ç§’åæ¢å¤åŸçŠ¶
                setTimeout(() => {
                    btn.innerText = "ğŸ“‹ å¤åˆ¶";
                    btn.classList.remove('success');
                }, 2000);
            }).catch(err => {
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é•¿æŒ‰å¤åˆ¶');
            });
        }
    </script>
</body>
</html>

